---
layout: post
title:  Интерлюдия
date:   2017-08-08 21:11:34 +06
tags:   twitter
---

Твиттер лидирует среди социальных сетей по количеству ботов. Это объясняется как и особенностью сети, так и тем достаточно удобным программным интерфейсом (API), который он предоставляет для выполнения автоматически тех или иных задач. Можно делать практически все, что может представить себе обыкновенный пользователь Твиттера, и многое, чего он даже представить не может.

Однако пользоваться этим API напрямую не то что неудобно - невозможно. Различные библиотеки на различных языках программирования предоставляют различные удобные фишки, облегчающие программирование запросов. Проблема, как сразу же показало первое пользование библиотекой tweepy, что они предоставляют "слишком много удобств", а точнее таких удобств, которые не нужны, запутаны, громоздки и плохо документированы.

Это очень старая, всем известная проблема "толстого интерфейса". Честно говоря, толстая прокладка под API Твиттера в принципе не может работать. Авторы такой библиотеки не имеют статистики нужд пользователей и доступа к планам и наработкам сотрудников Твиттера. 

Имеют шанс - только "тонкие" обертки над API - предоставление только действительно необходимых услуг и отказ от собственных абстракций. Такое утверждение прямо противоречит представлениям автора библиотеки Ruby, который заявил, что его цель создать API, не зависящее от будущих изменений в API твиттера. Неправильно и не реализуемо. С моей точки зрения.

Что действительно нужно:

1. Формирование правильных данных для авторизации.

2. Подготовка параметров запроса.

3. Компоновка запроса.

4. Выполнение запроса.

5. Получение и обработка ответа.

6. Формирование возможных дополнительных запросов на основе ответа.

7. Учет лимитов.

8. Обработка ошибок.

9. Поддержка нескольких профилей.

Методы, которые предоставляют библиотеки, должны отражаться один в один в методы API твиттера. Тонкие клиенты существуют. Я пользовался twurl - клиентом твиттера, написанном на Руби. Однако он уж слишком минималистичен - из перечисленных 9-и пунктов он помогает только с первым и последним.

На Питоне есть TwitterAPI - вроде действительно очень тонкий клиент. Поскольку никакой переправы у меня нет, то завтра попробую поменять коня - попробуем эту библиотеку.
