---
layout: post
title:  Defectors - значит перебежчики
date:   2017-08-08 17:55:53 +06
tags:   twitter
---

План

1. Создаю вручную список defectors.
2. Создаю скрипт update-defectors.
3. Получаю id всех, кто меня читает.
4. Получаю id всех, кого я читаю.
5. Выявляю разницу: читаемые - читатели.
6. Получаю участников списка.
7. Добавляю в список тех из разницы, которых там нет.

Предварительные заметки:

* id получать быстро - 5000 за раз и всего (кажется) 15 раз за 15 минут. 

* Скрипт, конечно, промежуточный, экспериментальный. Надо делить (работа с id отдельно, со списками отдельно) и обобщать - со всеми id, со всеми списками.

* Конкретную информацию о методах буду записывать в скрипте в комментариях.

* Скорее всего пункты 6-7 избыточны, можно добавлять скопом, задача твиттора не допустить повторений - но для изучения API сделаю так.

Тых-тых-тых... Работа пошла...

Done. 2 человека меня бросили и были помещены на всеобщее обозрение. Это было просто, но не радостно. Подтвердилось мое опасение - лишние, непонятные абстракции, отсутствующая и устаревшая документация (конкретно встретилось про 500 участников списка - сейчас можно 5000).

К реализации курсора претензий (пока) нет. Хотя это и вручную несложно. `friends_ids`, `followers_ids` - тонкие прослойки над `GET friends/ids`, etc.

А вот `add_list_member` - это уже толсто - абстракция над `POST list/members/create`. Обнаружился недокументированный метод `add_list_members` - скорее всего `POST list/members/create_all`.

То есть понятно - в добавление к Twitter API надо еще разбираться в хитросплетениях tweepy. 

Ладно. В Омске нахожусь еще 6 дней, делать особо нечего, посвящу 3-4 дня на окончательное принятие решения о продолжении пользования этой библиотекой.


Дальнейшая задача - найти твиты, ретвиты, лайки с моим упоминанием и поместить авторов в список. Название списка нейтральное. Допустим, summer.
